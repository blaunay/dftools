grammar net.sf.dftools.cdl.Cdl with org.eclipse.xtext.common.Terminals

generate cdl "http://www.sf.net/dftools/cdl/Cdl"

///////////////////////////////////////////////////////////////////////////////
// top-level entity
///////////////////////////////////////////////////////////////////////////////

AstEntity: 
	('package' package=QualifiedName ';')?
	(imports += Import)*
	
	((types+=  AstEnumDeclaration)+)?
	((classes+= AstClassDeclaration)+)?
	
	('component' name=ID '(' ')' component=AstComponent)?;

Import: 'import' importedNamespace=QualifiedNameWithWildCard ';';

QualifiedName:
	ID ('.' ID)*;

QualifiedNameWithWildCard:
	QualifiedName '.*'?;
	
	
///////////////////////////////////////////////////////////////////////////////
// component
///////////////////////////////////////////////////////////////////////////////

AstComponent: {AstComponent}
'{'
'}';

///////////////////////////////////////////////////////////////////////////////
// classes
///////////////////////////////////////////////////////////////////////////////

AstClassDeclaration: 
	'class' name=ID  '{'
		((attributes+=AstAttribute)';')*
	'}';
	
AstAttribute: type=AstType name=ID;

///////////////////////////////////////////////////////////////////////////////
// types
///////////////////////////////////////////////////////////////////////////////

AstType: AstTypeBool | AstTypeInt | AstTypeLong | AstTypeString;

AstTypeBool: name='bool';

AstTypeInt: name='int';

AstTypeLong: name='long';

AstTypeString: name='String';

AstEnumDeclaration returns AstType:
	'enum'  name=ID '{' (identifiers += ID) (',' (identifiers += ID)*)? '}';
	